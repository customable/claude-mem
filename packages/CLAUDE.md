<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #3040 | 7:45 PM | ğŸ”µ | Discovered ClaudeMd Entity Structure | ~1729 |
| #3037 | 7:45 PM | ğŸ”µ | MikroORM Database Initializer Structure | ~1912 |
| #3032 | 7:45 PM | ğŸ”µ | Session Entity Structure Analysis | ~1995 |
| #3031 | 7:45 PM | ğŸ”µ | UserPrompt Entity Structure Analysis | ~1621 |
| #3023 | 7:45 PM | ğŸ“¦ | Database migration for user_tasks table | ~2094 |
| #3022 | 7:45 PM | ğŸ“ | Reviewed shared utilities export structure | ~1249 |
| #3018 | 7:45 PM | ğŸ”µ | Exploring settings.ts configuration structure | ~2267 |
| #3017 | 7:44 PM | ğŸ”µ | Session Entity Structure Analysis | ~1989 |
| #3015 | 7:44 PM | ğŸ”µ | RawMessage Entity Structure Analysis | ~1917 |
| #3014 | 7:44 PM | ğŸ”µ | MikroORM Database Initializer Structure | ~1926 |
| #3011 | 7:44 PM | ğŸ”µ | ObservationLink Entity Structure | ~1475 |
| #3010 | 7:44 PM | ğŸ“ | Reviewed CodeSnippet Entity Structure | ~1430 |
| #3009 | 7:44 PM | ğŸ“¦ | Database migration for task deduplication | ~1376 |
| #3007 | 7:44 PM | ğŸ”µ | MikroORM multi-database configuration discovered | ~2274 |
| #3004 | 7:44 PM | ğŸ”µ | Database entities structure discovered | ~1359 |
| #3002 | 7:44 PM | ğŸ”µ | ArchivedOutput Entity Structure for Endless Mode | ~1792 |
| #3000 | 7:43 PM | ğŸ”µ | Backend Service CLI Structure and Commands | ~2027 |
| #2999 | 7:43 PM | ğŸ”µ | Task Entity Structure Analysis | ~1708 |
| #2998 | 7:43 PM | ğŸ”µ | Document Entity Structure Analysis | ~1664 |
| #2997 | 7:43 PM | ğŸ”µ | CLI frameworks used in the codebase | ~1148 |
| #2991 | 7:43 PM | ğŸ”µ | Summary Entity Structure Analysis | ~1673 |
| #2990 | 7:43 PM | ğŸ”µ | MikroORM Database Initializer Structure | ~1981 |
| #2971 | 7:40 PM | âš™ï¸ | Vite configuration for UI package | ~1302 |
| #2970 | 7:40 PM | âš¡ | Added manual chunks to Vite config for better caching | ~1886 |
| #2963 | 7:39 PM | ğŸ”µ | UI package.json reveals React 19 and Vite 7 usage | ~1536 |
| #2950 | 7:37 PM | ğŸ”µ | User Task Types and Repository Interface | ~2193 |
| #2947 | 7:37 PM | ğŸ”µ | Searching for subagent and task-related code patterns | ~1173 |
| #2946 | 7:36 PM | ğŸ”µ | Discovered UserTaskRepository implementation for CLI task management | ~2274 |
| #2945 | 7:36 PM | ğŸ”µ | Task Entity Structure Analysis | ~1715 |
| #2941 | 7:36 PM | ğŸ”µ | Hook Handlers Registry Architecture | ~1780 |

## Key Insights

- **Database Architecture**: Extensive MikroORM setup with 17 entities and multi-database support (SQLite, PostgreSQL, MySQL). Key entities include Session, Task, UserPrompt, and ObservationLink.
- **Performance**: UI bundle size (780.87 kB) identified as a performance issue. Vite config updated with manual chunks for better caching.
- **Task Management**: Comprehensive task system with CLI integration (Commander.js), deduplication, and lifecycle management (pending/in_progress/completed).
- **Multi-tenancy**: Research underway for PostgreSQL support and SaaS implementation, with multi-instance architecture as a potential alternative.
- **Rebranding**: Domain options explored for potential rebranding, alongside architectural improvements for distribution and scalability.
</claude-mem-context>

# Package Structure

## Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  types   â”‚  â† Pure TypeScript interfaces, no runtime code
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  shared  â”‚  â† Runtime utilities: logger, settings, paths
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ database â”‚     â”‚  worker  â”‚     â”‚  hooks   â”‚
â”‚          â”‚     â”‚          â”‚â—„â”€â”€â”€â”€â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ backend  â”‚     â”‚    ui    â”‚  â† Communicates via HTTP API
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Package Overview

| Package | Purpose | Key Exports |
|---------|---------|-------------|
| **types** | TypeScript definitions | Interfaces, types, enums (no runtime) |
| **shared** | Runtime utilities | `createLogger`, `loadSettings`, `PATHS` |
| **database** | Data persistence | MikroORM entities, repositories |
| **backend** | API server | Express routes, services, WebSocket |
| **hooks** | Claude integration | Hook handlers for Claude Code events |
| **worker** | AI processing | Observation extraction, summarization |
| **ui** | Web interface | React/Vite frontend |

## Guidelines

### Where to put new code?

- **New interface/type?** â†’ `types`
- **Utility function used by multiple packages?** â†’ `shared`
- **Database entity or query?** â†’ `database`
- **API endpoint?** â†’ `backend`
- **Claude hook handler?** â†’ `hooks`
- **AI task processing?** â†’ `worker`
- **UI component?** â†’ `ui`

### Import Rules

1. `types` has no internal dependencies
2. `shared` only imports from `types`
3. `database` imports from `shared` and `types`
4. `backend` can import from all except `hooks` and `ui`
5. `ui` has no internal dependencies (HTTP API only)