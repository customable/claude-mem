<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #3172 | 8:06 PM | ğŸ”µ | Legacy settings migration mechanism discovered | ~1839 |
| #3166 | 8:05 PM | ğŸ”µ | Database configuration supports SQLite, PostgreSQL, and MySQL | ~1634 |
| #3165 | 8:05 PM | ğŸŸ  | Add DATABASE_URL parsing functionality | ~2148 |
| #3164 | 8:05 PM | ğŸ”µ | Database package uses MikroORM with multiple SQL drivers | ~1661 |
| #3163 | 8:05 PM | ğŸ”µ | Settings loading and merging logic discovered | ~1732 |
| #3162 | 8:05 PM | ğŸ”µ | MikroORM multi-database configuration discovered | ~2458 |
| #3146 | 8:02 PM | ğŸŸ  | Added parseTargetDatabase and TargetDatabase to migration exports | ~1798 |
| #3140 | 8:01 PM | ğŸ”µ | Legacy database import CLI command discovered | ~1636 |
| #3138 | 8:01 PM | ğŸ”µ | CLI commands for configuration and migration discovered | ~1710 |
| #3129 | 7:59 PM | ğŸ”µ | CLI Configuration and Service Initialization | ~1742 |
| #3122 | 7:59 PM | ğŸ”µ | Settings parsing and migration logic discovered | ~1733 |
| #3120 | 7:59 PM | ğŸ”µ | Environment variable usage found in settings.ts | ~1082 |
| #3118 | 7:58 PM | ğŸ”µ | AI and Database Configuration Settings | ~2131 |
| #3117 | 7:58 PM | ğŸ”µ | Backend Service Initialization and Configuration | ~1724 |
| #3115 | 7:58 PM | ğŸ”µ | Search for CLAUDE_MEM_DATABASE in settings.ts | ~1056 |
| #3110 | 7:57 PM | ğŸ”µ | Database initialization and service setup in backend-service.ts | ~1631 |
| #3107 | 7:57 PM | ğŸ”µ | Database configuration and MikroORM usage discovered | ~1306 |
| #3105 | 7:57 PM | ğŸ”µ | Database configuration supports both SQLite and PostgreSQL | ~1339 |
| #3093 | 7:56 PM | ğŸ”µ | Database configuration interface discovered | ~1704 |
| #3081 | 7:53 PM | ğŸ”µ | Discovered CreateObservationInput interface structure | ~1818 |
| #3080 | 7:53 PM | ğŸ”µ | MikroORM database layer exports structure | ~1445 |
| #3078 | 7:53 PM | ğŸ”µ | Repository Pattern Types and Search Interface | ~2081 |
| #3076 | 7:52 PM | ğŸ”µ | MikroORM Database Initializer Structure | ~1937 |
| #3073 | 7:51 PM | ğŸ“ | Database layer documentation and structure overview | ~1409 |
| #3072 | 7:51 PM | ğŸ”µ | Backend package.json analysis | ~1808 |
| #3068 | 7:51 PM | ğŸŸ  | Create migration module for legacy data import | ~1641 |
| #3065 | 7:50 PM | ğŸŸ  | Create SQLite backup utility for legacy migration | ~2520 |
| #3064 | 7:49 PM | ğŸŸ  | Create type mapper for legacy migration | ~2350 |
| #3052 | 7:47 PM | ğŸ”µ | Backend package.json structure and dependencies | ~1821 |
| #3050 | 7:47 PM | ğŸ”µ | Base Router Class Structure and Utilities | ~1984 |

## Key Insights

- **Multi-database support**: The system now supports SQLite, PostgreSQL, and MySQL via MikroORM, with PostgreSQL connection string parsing added.
- **Legacy migration system**: Comprehensive migration tools were created for importing data from legacy systems, including backup utilities and type mapping.
- **Configuration architecture**: Settings management handles file settings, environment variables, and legacy key migration with clear precedence rules.
- **CLI enhancements**: New CLI commands for configuration display and legacy database import with multiple options (dry-run, backup, conflict resolution).
- **Rebranding initiative**: Project is transitioning to "remembr" with new organization structure and SaaS infrastructure planning underway.
</claude-mem-context>

# Package Structure

## Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  types   â”‚  â† Pure TypeScript interfaces, no runtime code
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  shared  â”‚  â† Runtime utilities: logger, settings, paths
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ database â”‚     â”‚  worker  â”‚     â”‚  hooks   â”‚
â”‚          â”‚     â”‚          â”‚â—„â”€â”€â”€â”€â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ backend  â”‚     â”‚    ui    â”‚  â† Communicates via HTTP API
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Package Overview

| Package | Purpose | Key Exports |
|---------|---------|-------------|
| **types** | TypeScript definitions | Interfaces, types, enums (no runtime) |
| **shared** | Runtime utilities | `createLogger`, `loadSettings`, `PATHS` |
| **database** | Data persistence | MikroORM entities, repositories |
| **backend** | API server | Express routes, services, WebSocket |
| **hooks** | Claude integration | Hook handlers for Claude Code events |
| **worker** | AI processing | Observation extraction, summarization |
| **ui** | Web interface | React/Vite frontend |

## Guidelines

### Where to put new code?

- **New interface/type?** â†’ `types`
- **Utility function used by multiple packages?** â†’ `shared`
- **Database entity or query?** â†’ `database`
- **API endpoint?** â†’ `backend`
- **Claude hook handler?** â†’ `hooks`
- **AI task processing?** â†’ `worker`
- **UI component?** â†’ `ui`

### Import Rules

1. `types` has no internal dependencies
2. `shared` only imports from `types`
3. `database` imports from `shared` and `types`
4. `backend` can import from all except `hooks` and `ui`
5. `ui` has no internal dependencies (HTTP API only)