# Claude-Mem Development Instructions

**WICHTIG: Alle Anweisungen in dieser Datei sind verbindlich und mÃ¼ssen strikt befolgt werden!**

## Workflow

### Commits & Push

- **Pro Issue mindestens ein Commit** (gerne auch mehr bei grÃ¶ÃŸeren Ã„nderungen)
- **Pushen nur mit Freigabe vom User**, auÃŸer der Prompt am Anfang erlaubt direktes Pushen
- Bei mehreren Issues: Pro Issue eigene Commits erstellen, dann am Ende gesammelt pushen (nach Freigabe)

### Issues umsetzen

- **Issues IMMER komplett umsetzen** - nicht in Phasen oder Teilschritten
- Erst mit dem nÃ¤chsten Issue beginnen, wenn das aktuelle vollstÃ¤ndig abgeschlossen ist
- Bei Blockern oder Unklarheiten: User fragen, nicht teilweise implementieren

### CLAUDE.md Dateien

- **Automatisch generierte CLAUDE.md-Dateien regelmÃ¤ÃŸig mit committen**
- Diese Dateien werden vom Plugin automatisch aktualisiert
- User-Content auÃŸerhalb der generierten Bereiche bleibt erhalten

## Technische Details

### Monorepo-Struktur

```
packages/
â”œâ”€â”€ backend/     # Express API Server
â”œâ”€â”€ database/    # MikroORM Entities & Repositories
â”œâ”€â”€ hooks/       # Claude Code Hook Handlers
â”œâ”€â”€ shared/      # Shared Utilities (Logger, Settings)
â”œâ”€â”€ types/       # TypeScript Interfaces
â”œâ”€â”€ ui/          # React/Vite Frontend
â””â”€â”€ worker/      # AI Task Processing
plugin/          # Claude Code Plugin
```

### Wichtige Befehle

```bash
# Development
pnpm dev              # Build plugin + sync to marketplace
pnpm build            # Build all packages
pnpm test             # Run tests
pnpm typecheck        # TypeScript check (1x ausfÃ¼hren bis "Done", bei unklarer Ausgabe Script anpassen)
pnpm sync-marketplace # Sync plugin to Claude marketplace
pnpm dev:restart      # Restart dev services

# Einzelne Packages builden
pnpm build:backend    # Backend only
pnpm build:worker     # Worker only
pnpm build:hooks      # Hooks only
pnpm build:plugin     # Plugin only

# Docker
pnpm docker:up        # Start containers
pnpm docker:down      # Stop containers
pnpm docker:logs      # View logs
```

### Issue-Tracker

- Repository: `customable/claude-mem` auf Forgejo
- Labels werden automatisch gesetzt (priority, type)
- **Kommentare und Attachments in Issues IMMER prÃ¼fen** - kÃ¶nnen wichtige Informationen enthalten
- **Blocks und Dependencies beachten** - Issues kÃ¶nnen andere blockieren oder von anderen abhÃ¤ngen

### UI-Referenzen

- Screenshots und Design-Referenzen: `~/references`

### Bei grÃ¶ÃŸeren Ã„nderungen

Nach Ã„nderungen an Backend, Worker oder Hooks:

1. **Plugin builden und syncen:**
   ```bash
   pnpm build && pnpm sync-marketplace
   ```

2. **Backend-Erreichbarkeit prÃ¼fen:**
   - Nach Neustart testen ob Backend erreichbar ist
   - Falls nicht erreichbar: Erst stoppen, dann **ohne** `-head` oder `-tail` neustarten
   - Direkt die JS-Datei ausfÃ¼hren um vollstÃ¤ndigen Log zu sehen:
     ```bash
     node packages/backend/dist/cli.js start
     ```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #3426 | 8:41 PM | ğŸŸ  | Created worker-hub package index file | ~1400 |
| #3425 | 8:41 PM | ğŸ”¬ | Research on Claude Code Hook Types and Payloads | ~1639 |
| #3424 | 8:41 PM | ğŸ”µ | PNPM workspace configuration discovered | ~1096 |
| #3423 | 8:41 PM | ğŸŸ  | Create Worker Hub CLI for distributed deployments | ~2907 |
| #3422 | 8:41 PM | ğŸ”¬ | Task Management API Technical Details Extracted | ~1747 |
| #3421 | 8:40 PM | ğŸ”µ | Plan Mode Technical Architecture Details Extracted | ~1676 |
| #3420 | 8:40 PM | ğŸ”µ | [Compressed] Write | ~141 |
| #3419 | 8:40 PM | ğŸ”¬ | Claude Code Features Investigation Summary | ~1765 |
| #3418 | 8:39 PM | ğŸ”µ | [Compressed] Write | ~178 |
| #3417 | 8:39 PM | ğŸ”µ | Worker package configuration and dependencies | ~1615 |
| #3416 | 8:39 PM | ğŸ”µ | [Compressed] Write | ~168 |
| #3415 | 8:39 PM | âš™ï¸ | Created TypeScript configuration for worker-hub package | ~1304 |
| #3414 | 8:38 PM | ğŸŸ  | Add FederatedRouter and TaskRoutingOptions exports | ~1972 |
| #3413 | 8:38 PM | ğŸŸ  | Created worker-hub package.json with CLI and WebSocket dependencies | ~1946 |
| #3412 | 8:38 PM | ğŸ”µ | Empty worker-hub package directory | ~1017 |
| #3411 | 8:38 PM | ğŸ”µ | [Compressed] Read | ~166 |
| #3410 | 8:38 PM | ğŸ”µ | Worker package structure exploration | ~2113 |
| #3409 | 8:38 PM | ğŸ”µ | [Compressed] Read | ~164 |
| #3408 | 8:37 PM | ğŸ”µ | [Compressed] Read | ~152 |
| #3407 | 8:37 PM | ğŸ”µ | WebSocket module exports structure discovered | ~1314 |
| #3406 | 8:37 PM | ğŸ”µ | [Compressed] Read | ~176 |
| #3405 | 8:36 PM | ğŸ”µ | [Compressed] mcp__forgejo__create_issue | ~220 |
| #3404 | 8:36 PM | ğŸ”µ | [Compressed] Write | ~128 |
| #3403 | 8:35 PM | ğŸ”µ | Found remembr repository in Forgejo | ~1116 |
| #3402 | 8:35 PM | ğŸ”µ | [Compressed] mcp__forgejo__get_issue | ~180 |
| #3401 | 8:35 PM | ğŸ”µ | [Compressed] mcp__forgejo__list_issue_comments | ~161 |
| #3400 | 8:33 PM | â˜‘ï¸ | Staging files for Issue #263 | ~1623 |
| #3399 | 8:33 PM | ğŸ”µ | Recent commits show federation feature and documentation updates | ~1246 |
| #3398 | 8:33 PM | ğŸ“ | Commit auto-generated CLAUDE.md documentation files | ~1296 |
| #3397 | 8:33 PM | ğŸŸ  | WorkerHub federation with token-based auth (Issue #263) | ~1854 |

## Key Insights

- **Worker Federation Implementation**: Created worker-hub package with CLI and WebSocket capabilities for distributed deployments (Issue #263), featuring token-based authentication and modular architecture.
- **Architecture Discoveries**: Uncovered PNPM monorepo structure, WebSocket module exports, and worker package dependencies (Anthropic, Mistral AI, Qdrant).
- **Technical Research**: Documented Claude Code hook types, task management API, and Plan Mode architecture, revealing file-based storage and restricted permission mechanisms.
- **Documentation Updates**: Auto-generated CLAUDE.md files committed across packages, indicating comprehensive documentation refresh.
- **Next Steps**: Merge federation changes (Issue #263), implement multi-database support (SQLite + PostgreSQL), and address TaskCreate hook bug for taskId capture.
</claude-mem-context>
