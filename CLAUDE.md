# Claude-Mem Development Instructions

**WICHTIG: Alle Anweisungen in dieser Datei sind verbindlich und mÃ¼ssen strikt befolgt werden!**

## Workflow

### Commits & Push

- **Pro Issue mindestens ein Commit** (gerne auch mehr bei grÃ¶ÃŸeren Ã„nderungen)
- **Pushen nur mit Freigabe vom User**, auÃŸer der Prompt am Anfang erlaubt direktes Pushen
- Bei mehreren Issues: Pro Issue eigene Commits erstellen, dann am Ende gesammelt pushen (nach Freigabe)

### Issues umsetzen

- **Issues IMMER komplett umsetzen** - nicht in Phasen oder Teilschritten
- Erst mit dem nÃ¤chsten Issue beginnen, wenn das aktuelle vollstÃ¤ndig abgeschlossen ist
- Bei Blockern oder Unklarheiten: User fragen, nicht teilweise implementieren

### CLAUDE.md Dateien

- **Automatisch generierte CLAUDE.md-Dateien regelmÃ¤ÃŸig mit committen**
- Diese Dateien werden vom Plugin automatisch aktualisiert
- User-Content auÃŸerhalb der generierten Bereiche bleibt erhalten

## Technische Details

### Monorepo-Struktur

```
packages/
â”œâ”€â”€ backend/     # Express API Server
â”œâ”€â”€ database/    # MikroORM Entities & Repositories
â”œâ”€â”€ hooks/       # Claude Code Hook Handlers
â”œâ”€â”€ shared/      # Shared Utilities (Logger, Settings)
â”œâ”€â”€ types/       # TypeScript Interfaces
â”œâ”€â”€ ui/          # React/Vite Frontend
â””â”€â”€ worker/      # AI Task Processing
plugin/          # Claude Code Plugin
```

### Wichtige Befehle

```bash
# Development
pnpm dev              # Build plugin + sync to marketplace
pnpm build            # Build all packages
pnpm test             # Run tests
pnpm typecheck        # TypeScript check (1x ausfÃ¼hren bis "Done", bei unklarer Ausgabe Script anpassen)
pnpm sync-marketplace # Sync plugin to Claude marketplace
pnpm dev:restart      # Restart dev services

# Einzelne Packages builden
pnpm build:backend    # Backend only
pnpm build:worker     # Worker only
pnpm build:hooks      # Hooks only
pnpm build:plugin     # Plugin only

# Docker
pnpm docker:up        # Start containers
pnpm docker:down      # Stop containers
pnpm docker:logs      # View logs
```

### Issue-Tracker

- Repository: `customable/claude-mem` auf Forgejo
- Labels werden automatisch gesetzt (priority, type)
- **Kommentare und Attachments in Issues IMMER prÃ¼fen** - kÃ¶nnen wichtige Informationen enthalten
- **Blocks und Dependencies beachten** - Issues kÃ¶nnen andere blockieren oder von anderen abhÃ¤ngen

### UI-Referenzen

- Screenshots und Design-Referenzen: `~/references`

### Bei grÃ¶ÃŸeren Ã„nderungen

Nach Ã„nderungen an Backend, Worker oder Hooks:

1. **Plugin builden und syncen:**
   ```bash
   pnpm build && pnpm sync-marketplace
   ```

2. **Backend-Erreichbarkeit prÃ¼fen:**
   - Nach Neustart testen ob Backend erreichbar ist
   - Falls nicht erreichbar: Erst stoppen, dann **ohne** `-head` oder `-tail` neustarten
   - Direkt die JS-Datei ausfÃ¼hren um vollstÃ¤ndigen Log zu sehen:
     ```bash
     node packages/backend/dist/cli.js start
     ```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #3068 | 7:51 PM | ğŸŸ  | Create migration module for legacy data import | ~1641 |
| #3067 | 7:51 PM | ğŸ”µ | [Compressed] Write | ~180 |
| #3066 | 7:50 PM | ğŸ”µ | [Compressed] Write | ~152 |
| #3065 | 7:50 PM | ğŸŸ  | Create SQLite backup utility for legacy migration | ~2520 |
| #3064 | 7:49 PM | ğŸŸ  | Create type mapper for legacy migration | ~2350 |
| #3063 | 7:49 PM | ğŸ”µ | [Compressed] Read | ~130 |
| #3062 | 7:49 PM | ğŸ”µ | [Compressed] Read | ~136 |
| #3061 | 7:49 PM | ğŸ”µ | No migration files found in backend | ~1009 |
| #3060 | 7:49 PM | ğŸ”µ | Rebranding plan for claude-mem fork discovered | ~1728 |
| #3059 | 7:49 PM | ğŸ”µ | [Compressed] mcp__forgejo__edit_issue | ~259 |
| #3058 | 7:49 PM | ğŸ“‹ | Migration Plan for Issue #198 - Import from thedotmack/claude-mem | ~2234 |
| #3057 | 7:48 PM | ğŸ”µ | [Compressed] mcp__forgejo__get_issue | ~216 |
| #3056 | 7:48 PM | ğŸ”µ | [Compressed] Write | ~212 |
| #3055 | 7:48 PM | ğŸ”µ | [Compressed] mcp__forgejo__get_issue | ~262 |
| #3054 | 7:47 PM | ğŸ”µ | [Compressed] Task | ~225 |
| #3053 | 7:47 PM | â˜‘ï¸ | Added labels to issue #306 | ~1099 |
| #3052 | 7:47 PM | ğŸ”µ | Backend package.json structure and dependencies | ~1821 |
| #3051 | 7:47 PM | ğŸ”µ | [Compressed] Read | ~173 |
| #3050 | 7:47 PM | ğŸ”µ | Base Router Class Structure and Utilities | ~1984 |
| #3049 | 7:46 PM | ğŸ”µ | [Compressed] Read | ~145 |
| #3048 | 7:46 PM | ğŸ”µ | ObservationType and DecisionCategory usage in codebase | ~1761 |
| #3047 | 7:46 PM | ğŸ”µ | [Compressed] Read | ~180 |
| #3046 | 7:46 PM | ğŸ”µ | [Compressed] Read | ~146 |
| #3045 | 7:46 PM | ğŸ”µ | Identified settings-related files in shared package | ~1067 |
| #3044 | 7:46 PM | ğŸ”— | Consolidated issue #108 into vision document #306 | ~1247 |
| #3043 | 7:46 PM | ğŸ”µ | Repository Entity Structure Analysis | ~1370 |
| #3042 | 7:45 PM | ğŸ”µ | [Compressed] Read | ~161 |
| #3041 | 7:45 PM | ğŸ”µ | [Compressed] mcp__forgejo__edit_issue | ~159 |
| #3040 | 7:45 PM | ğŸ”µ | Discovered ClaudeMd Entity Structure | ~1729 |
| #3039 | 7:45 PM | ğŸ”µ | [Compressed] Read | ~127 |

## Key Insights

- **Migration System Development**: Created comprehensive migration tools (type mapper, backup utility, migration module) for importing legacy data from thedotmack/claude-mem, addressing Issue #198.
- **Rebranding Initiative**: Discovered and documented plans to rebrand the fork to "remembr" (Issue #303), including domain acquisition (remembr.dev) and package renaming.
- **Multi-Tenancy Strategy**: Evaluated multi-tenancy approaches (Column, Schema, Database) with Column Strategy recommended for MVP, while acknowledging SQLite limitations and PostgreSQL as the long-term solution.
- **Codebase Exploration**: Extensive analysis of core components (BaseRouter, Repository entity, ClaudeMd entity, settings module) to understand architecture and dependencies.
- **Issue Consolidation**: Merged related issues (#108, #107) into a unified vision document (#306) for better strategic planning and prioritization.
</claude-mem-context>
