# Claude-Mem Development Instructions

**WICHTIG: Alle Anweisungen in dieser Datei sind verbindlich und mÃ¼ssen strikt befolgt werden!**

## Workflow

### Commits & Push

- **Pro Issue mindestens ein Commit** (gerne auch mehr bei grÃ¶ÃŸeren Ã„nderungen)
- **Pushen nur mit Freigabe vom User**, auÃŸer der Prompt am Anfang erlaubt direktes Pushen
- Bei mehreren Issues: Pro Issue eigene Commits erstellen, dann am Ende gesammelt pushen (nach Freigabe)

### Issues umsetzen

- **Issues IMMER komplett umsetzen** - nicht in Phasen oder Teilschritten
- Erst mit dem nÃ¤chsten Issue beginnen, wenn das aktuelle vollstÃ¤ndig abgeschlossen ist
- Bei Blockern oder Unklarheiten: User fragen, nicht teilweise implementieren

### CLAUDE.md Dateien

- **Automatisch generierte CLAUDE.md-Dateien regelmÃ¤ÃŸig mit committen**
- Diese Dateien werden vom Plugin automatisch aktualisiert
- User-Content auÃŸerhalb der generierten Bereiche bleibt erhalten

## Technische Details

### Monorepo-Struktur

```
packages/
â”œâ”€â”€ backend/     # Express API Server
â”œâ”€â”€ database/    # MikroORM Entities & Repositories
â”œâ”€â”€ hooks/       # Claude Code Hook Handlers
â”œâ”€â”€ shared/      # Shared Utilities (Logger, Settings)
â”œâ”€â”€ types/       # TypeScript Interfaces
â”œâ”€â”€ ui/          # React/Vite Frontend
â””â”€â”€ worker/      # AI Task Processing
plugin/          # Claude Code Plugin
```

### Wichtige Befehle

```bash
# Development
pnpm dev              # Build plugin + sync to marketplace
pnpm build            # Build all packages
pnpm test             # Run tests
pnpm typecheck        # TypeScript check (1x ausfÃ¼hren bis "Done", bei unklarer Ausgabe Script anpassen)
pnpm sync-marketplace # Sync plugin to Claude marketplace
pnpm dev:restart      # Restart dev services

# Einzelne Packages builden
pnpm build:backend    # Backend only
pnpm build:worker     # Worker only
pnpm build:hooks      # Hooks only
pnpm build:plugin     # Plugin only

# Docker
pnpm docker:up        # Start containers
pnpm docker:down      # Stop containers
pnpm docker:logs      # View logs
```

### Issue-Tracker

- Repository: `customable/claude-mem` auf Forgejo
- Labels werden automatisch gesetzt (priority, type)
- **Kommentare und Attachments in Issues IMMER prÃ¼fen** - kÃ¶nnen wichtige Informationen enthalten
- **Blocks und Dependencies beachten** - Issues kÃ¶nnen andere blockieren oder von anderen abhÃ¤ngen

### UI-Referenzen

- Screenshots und Design-Referenzen: `~/references`

### Bei grÃ¶ÃŸeren Ã„nderungen

Nach Ã„nderungen an Backend, Worker oder Hooks:

1. **Plugin builden und syncen:**
   ```bash
   pnpm build && pnpm sync-marketplace
   ```

2. **Backend-Erreichbarkeit prÃ¼fen:**
   - Nach Neustart testen ob Backend erreichbar ist
   - Falls nicht erreichbar: Erst stoppen, dann **ohne** `-head` oder `-tail` neustarten
   - Direkt die JS-Datei ausfÃ¼hren um vollstÃ¤ndigen Log zu sehen:
     ```bash
     node packages/backend/dist/cli.js start
     ```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #2098 | 5:19 PM | ðŸ”µ | API Client Methods for Insights and Tasks | ~1646 |
| #2097 | 5:19 PM | ðŸ”µ | Issue #260: TodoList & PlanMode Feature Requirements | ~3559 |
| #2096 | 5:19 PM | ðŸ”µ | Client.ts file size discovered | ~723 |
| #2095 | 5:19 PM | ðŸ”µ | Build process completed with CSS warning | ~1483 |
| #2094 | 5:19 PM | ðŸ”µ | Search for compression and archiving code | ~788 |
| #2093 | 5:19 PM | ðŸŸ  | Phase 3 Complete: MCP Tools & API Endpoints | ~1118 |
| #2092 | 5:19 PM | ðŸŸ  | Add Archived Outputs API Endpoints | ~3019 |
| #2091 | 5:18 PM | ðŸŸ  | Add MCP tools and API endpoints | ~1160 |
| #2090 | 5:18 PM | ðŸ”µ | Git status reveals modified CLAUDE.md files | ~1155 |
| #2089 | 5:17 PM | âœ… | TypeScript type check passes for all projects | ~1025 |
| #2088 | 5:17 PM | ðŸ”´ | TypeScript errors in DataRouter | ~1516 |
| #2087 | 5:17 PM | ðŸ”„ | Standardize error handling in endpoints | ~7328 |
| #2086 | 5:16 PM | ðŸ”µ | BaseRouter class utilities discovered | ~1626 |
| #2085 | 5:16 PM | ðŸ”µ | Archived Outputs API Endpoints | ~2072 |
| #2084 | 5:16 PM | ðŸŸ  | Added recall_archived and archived_stats tools | ~6206 |
| #2083 | 5:15 PM | ðŸŸ  | Added archivedOutputs to DataRouter | ~5194 |
| #2082 | 5:15 PM | ðŸ”µ | DataRouter initialization discovered | ~2514 |
| #2081 | 5:15 PM | ðŸ”µ | Backend API routes structure discovered | ~1198 |
| #2080 | 5:15 PM | ðŸŸ  | Added archived outputs API endpoints | ~6386 |
| #2079 | 5:15 PM | ðŸ”µ | Discovered IArchivedOutputRepository Interface | ~2244 |
| #2078 | 5:15 PM | ðŸŸ  | Added Archived Outputs API Endpoints | ~5296 |
| #2077 | 5:15 PM | ðŸ”µ | Project settings API endpoints discovered | ~1201 |
| #2076 | 5:14 PM | ðŸŸ  | Added optional archivedOutputs repository | ~5043 |
| #2075 | 5:14 PM | ðŸ”µ | Count lines in data.ts | ~721 |
| #2074 | 5:14 PM | ðŸ”µ | Backend route files discovered | ~1367 |
| #2073 | 5:14 PM | ðŸ”µ | ArchivedOutput entity and related files | ~1333 |
| #2072 | 5:14 PM | ðŸ”µ | Endless Mode v7.1 Implementation Analysis | ~6138 |
| #2071 | 5:14 PM | ðŸŸ  | Add IArchivedOutputRepository and CompressionStatus | ~4942 |
| #2070 | 5:14 PM | ðŸ”µ | Exploring plugin directory structure | ~2355 |
| #2069 | 5:14 PM | ðŸ”µ | Examining API routes and session handling | ~2148 |

## Key Insights

- **Archived Outputs Feature**: Major progress on Endless Mode (Issue #109) with new API endpoints, MCP tools, and repository interfaces for archived outputs functionality.
- **TypeScript Health**: Type checks pass across all workspace projects, though DataRouter has 8 errors needing attention.
- **Code Quality**: Refactored error handling in archived outputs endpoints to standardize responses.
- **Documentation**: Multiple CLAUDE.md files modified, indicating ongoing documentation updates.
- **Build Status**: Successful build with minor CSS warnings and chunk size advisories.
</claude-mem-context>
