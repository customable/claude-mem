# Claude-Mem Development Instructions

**WICHTIG: Alle Anweisungen in dieser Datei sind verbindlich und mÃ¼ssen strikt befolgt werden!**

## Workflow

### Commits & Push

- **Pro Issue mindestens ein Commit** (gerne auch mehr bei grÃ¶ÃŸeren Ã„nderungen)
- **Pushen nur mit Freigabe vom User**, auÃŸer der Prompt am Anfang erlaubt direktes Pushen
- Bei mehreren Issues: Pro Issue eigene Commits erstellen, dann am Ende gesammelt pushen (nach Freigabe)

### Issues umsetzen

- **Issues IMMER komplett umsetzen** - nicht in Phasen oder Teilschritten
- Erst mit dem nÃ¤chsten Issue beginnen, wenn das aktuelle vollstÃ¤ndig abgeschlossen ist
- Bei Blockern oder Unklarheiten: User fragen, nicht teilweise implementieren

### CLAUDE.md Dateien

- **Automatisch generierte CLAUDE.md-Dateien regelmÃ¤ÃŸig mit committen**
- Diese Dateien werden vom Plugin automatisch aktualisiert
- User-Content auÃŸerhalb der generierten Bereiche bleibt erhalten

## Technische Details

### Monorepo-Struktur

```
packages/
â”œâ”€â”€ backend/     # Express API Server
â”œâ”€â”€ database/    # MikroORM Entities & Repositories
â”œâ”€â”€ hooks/       # Claude Code Hook Handlers
â”œâ”€â”€ shared/      # Shared Utilities (Logger, Settings)
â”œâ”€â”€ types/       # TypeScript Interfaces
â”œâ”€â”€ ui/          # React/Vite Frontend
â””â”€â”€ worker/      # AI Task Processing
plugin/          # Claude Code Plugin
```

### Wichtige Befehle

```bash
# Development
pnpm dev              # Build plugin + sync to marketplace
pnpm build            # Build all packages
pnpm test             # Run tests
pnpm typecheck        # TypeScript check (1x ausfÃ¼hren bis "Done", bei unklarer Ausgabe Script anpassen)
pnpm sync-marketplace # Sync plugin to Claude marketplace
pnpm dev:restart      # Restart dev services

# Einzelne Packages builden
pnpm build:backend    # Backend only
pnpm build:worker     # Worker only
pnpm build:hooks      # Hooks only
pnpm build:plugin     # Plugin only

# Docker
pnpm docker:up        # Start containers
pnpm docker:down      # Stop containers
pnpm docker:logs      # View logs
```

### Issue-Tracker

- Repository: `customable/claude-mem` auf Forgejo
- Labels werden automatisch gesetzt (priority, type)
- **Kommentare und Attachments in Issues IMMER prÃ¼fen** - kÃ¶nnen wichtige Informationen enthalten
- **Blocks und Dependencies beachten** - Issues kÃ¶nnen andere blockieren oder von anderen abhÃ¤ngen

### UI-Referenzen

- Screenshots und Design-Referenzen: `~/references`

### Bei grÃ¶ÃŸeren Ã„nderungen

Nach Ã„nderungen an Backend, Worker oder Hooks:

1. **Plugin builden und syncen:**
   ```bash
   pnpm build && pnpm sync-marketplace
   ```

2. **Backend-Erreichbarkeit prÃ¼fen:**
   - Nach Neustart testen ob Backend erreichbar ist
   - Falls nicht erreichbar: Erst stoppen, dann **ohne** `-head` oder `-tail` neustarten
   - Direkt die JS-Datei ausfÃ¼hren um vollstÃ¤ndigen Log zu sehen:
     ```bash
     node packages/backend/dist/cli.js start
     ```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #2460 | 6:20 PM | ğŸ”µ | TypeScript type checking passed | ~1328 |
| #2459 | 6:20 PM | ğŸ”µ | [Compressed] Read | ~166 |
| #2458 | 6:20 PM | ğŸ”µ | Hook system types discovered | ~1933 |
| #2457 | 6:20 PM | ğŸ”µ | Exploring hooks package structure | ~1162 |
| #2456 | 6:19 PM | ğŸ”µ | Search results show 44 items | ~872 |
| #2455 | 6:19 PM | ğŸ”µ | Extracting total count from search | ~926 |
| #2454 | 6:19 PM | ğŸ”µ | Database package built successfully | ~1043 |
| #2453 | 6:19 PM | ğŸŸ£ | Building TypeScript types package | ~784 |
| #2452 | 6:18 PM | ğŸ”µ | [Compressed] Edit | ~92 |
| #2451 | 6:18 PM | ğŸ”µ | [Compressed] Edit | ~136 |
| #2450 | 6:18 PM | ğŸ”µ | [Compressed] Edit | ~128 |
| #2449 | 6:17 PM | ğŸŸ  | Add user_tasks table migration | ~2548 |
| #2448 | 6:17 PM | ğŸ”µ | [Compressed] Edit | ~105 |
| #2447 | 6:17 PM | ğŸ”µ | [Compressed] Edit | ~142 |
| #2446 | 6:17 PM | ğŸ”µ | Migration for archived_outputs table | ~1932 |
| #2445 | 6:17 PM | ğŸ”µ | [Compressed] Edit | ~104 |
| #2444 | 6:17 PM | ğŸ”µ | [Compressed] Edit | ~123 |
| #2443 | 6:17 PM | ğŸ”µ | [Compressed] Edit | ~92 |
| #2442 | 6:17 PM | ğŸŸ  | Add MikroOrmUserTaskRepository export | ~1722 |
| #2441 | 6:17 PM | ğŸŸ  | Add user task types export | ~1573 |
| #2440 | 6:17 PM | ğŸ”µ | [Compressed] Read | ~114 |
| #2439 | 6:17 PM | ğŸ”µ | MikroORM Database Initializer | ~1931 |
| #2438 | 6:17 PM | ğŸ”µ | MikroORM repository exports | ~1594 |
| #2437 | 6:16 PM | ğŸ”µ | [Compressed] Bash | ~258 |
| #2436 | 6:16 PM | ğŸ”µ | [Compressed] Read | ~118 |
| #2435 | 6:16 PM | ğŸ”µ | [Compressed] Bash | ~521 |
| #2434 | 6:16 PM | ğŸ”µ | Mikro-ORM initializer files found | ~1168 |
| #2433 | 6:16 PM | ğŸ”µ | UnitOfWork pattern discovered | ~1384 |
| #2432 | 6:16 PM | ğŸ”µ | Shared TypeScript types explored | ~1425 |
| #2431 | 6:15 PM | ğŸŸ  | Added User Task Types and Repository | ~3097 |

## Key Insights

- **Type Safety Confirmed**: TypeScript type checking passed across 7/8 workspace projects, validating the project's type structure.
- **User Task Tracking**: New migration and types added for CLI task tracking (Issue #260), including comprehensive fields for task management.
- **Database Architecture**: MikroORM is used with UnitOfWork pattern, showing a robust repository-based data access layer.
- **Compression Efficiency**: Multiple content compressions achieved 90%+ token reduction, optimizing storage and processing.
- **Search Functionality**: Search API returns all available items (44/44), but extraction logic needs adjustment for empty results.
</claude-mem-context>
