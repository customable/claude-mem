# Claude-Mem Development Instructions

**WICHTIG: Alle Anweisungen in dieser Datei sind verbindlich und mÃ¼ssen strikt befolgt werden!**

## Workflow

### Commits & Push

- **Pro Issue mindestens ein Commit** (gerne auch mehr bei grÃ¶ÃŸeren Ã„nderungen)
- **Pushen nur mit Freigabe vom User**, auÃŸer der Prompt am Anfang erlaubt direktes Pushen
- Bei mehreren Issues: Pro Issue eigene Commits erstellen, dann am Ende gesammelt pushen (nach Freigabe)

### Issues umsetzen

- **Issues IMMER komplett umsetzen** - nicht in Phasen oder Teilschritten
- Erst mit dem nÃ¤chsten Issue beginnen, wenn das aktuelle vollstÃ¤ndig abgeschlossen ist
- Bei Blockern oder Unklarheiten: User fragen, nicht teilweise implementieren

### CLAUDE.md Dateien

- **Automatisch generierte CLAUDE.md-Dateien regelmÃ¤ÃŸig mit committen**
- Diese Dateien werden vom Plugin automatisch aktualisiert
- User-Content auÃŸerhalb der generierten Bereiche bleibt erhalten

## Technische Details

### Monorepo-Struktur

```
packages/
â”œâ”€â”€ backend/     # Express API Server
â”œâ”€â”€ database/    # MikroORM Entities & Repositories
â”œâ”€â”€ hooks/       # Claude Code Hook Handlers
â”œâ”€â”€ shared/      # Shared Utilities (Logger, Settings)
â”œâ”€â”€ types/       # TypeScript Interfaces
â”œâ”€â”€ ui/          # React/Vite Frontend
â””â”€â”€ worker/      # AI Task Processing
plugin/          # Claude Code Plugin
```

### Wichtige Befehle

```bash
# Development
pnpm dev              # Build plugin + sync to marketplace
pnpm build            # Build all packages
pnpm test             # Run tests
pnpm typecheck        # TypeScript check (1x ausfÃ¼hren bis "Done", bei unklarer Ausgabe Script anpassen)
pnpm sync-marketplace # Sync plugin to Claude marketplace
pnpm dev:restart      # Restart dev services

# Einzelne Packages builden
pnpm build:backend    # Backend only
pnpm build:worker     # Worker only
pnpm build:hooks      # Hooks only
pnpm build:plugin     # Plugin only

# Docker
pnpm docker:up        # Start containers
pnpm docker:down      # Stop containers
pnpm docker:logs      # View logs
```

### Issue-Tracker

- Repository: `customable/claude-mem` auf Forgejo
- Labels werden automatisch gesetzt (priority, type)
- **Kommentare und Attachments in Issues IMMER prÃ¼fen** - kÃ¶nnen wichtige Informationen enthalten
- **Blocks und Dependencies beachten** - Issues kÃ¶nnen andere blockieren oder von anderen abhÃ¤ngen

### UI-Referenzen

- Screenshots und Design-Referenzen: `~/references`

### Bei grÃ¶ÃŸeren Ã„nderungen

Nach Ã„nderungen an Backend, Worker oder Hooks:

1. **Plugin builden und syncen:**
   ```bash
   pnpm build && pnpm sync-marketplace
   ```

2. **Backend-Erreichbarkeit prÃ¼fen:**
   - Nach Neustart testen ob Backend erreichbar ist
   - Falls nicht erreichbar: Erst stoppen, dann **ohne** `-head` oder `-tail` neustarten
   - Direkt die JS-Datei ausfÃ¼hren um vollstÃ¤ndigen Log zu sehen:
     ```bash
     node packages/backend/dist/cli.js start
     ```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 25, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #1890 | 4:41 PM | ðŸŸ£ | Task 2 status updated to completed | ~684 |
| #1889 | 4:40 PM | ðŸ”µ | UI Component for Session Details | ~1196 |
| #1888 | 4:40 PM | ðŸ”µ | Located getTypeBadge function | ~722 |
| #1887 | 4:40 PM | ðŸ”µ | Project deletion behavior in UI | ~1369 |
| #1886 | 4:40 PM | ðŸ”´ | OBSERVATION_SYSTEM_PROMPT sync issue | ~3021 |
| #1885 | 4:40 PM | ðŸ”µ | UI displays file read/modified stats | ~1515 |
| #1884 | 4:39 PM | ðŸ”µ | UI component structure for sessions | ~1802 |
| #1883 | 4:38 PM | ðŸ”µ | TypeScript type check completed | ~858 |
| #1882 | 4:38 PM | ðŸ”µ | TypeScript type check passes 7/8 | ~1024 |
| #1881 | 4:37 PM | ðŸ”µ | TypeScript type check passes | ~951 |
| #1880 | 4:37 PM | ðŸ”µ | TypeScript type check passes | ~969 |
| #1879 | 4:36 PM | ðŸŸ  | Added project actions dropdown | ~5651 |
| #1878 | 4:36 PM | ðŸ”µ | API Client Structure and Types | ~1529 |
| #1877 | 4:36 PM | ðŸŸ  | Added project actions UI state | ~5849 |
| #1876 | 4:36 PM | ðŸŸ  | Added ProjectSettings interface | ~5551 |
| #1875 | 4:35 PM | ðŸŸ  | Add useRef and ProjectSettings | ~5132 |
| #1874 | 4:35 PM | ðŸŸ  | Added PUT request function | ~5524 |
| #1873 | 4:35 PM | ðŸŸ  | Added project settings API | ~5650 |
| #1872 | 4:35 PM | ðŸ”µ | API Client Methods for Data | ~2354 |
| #1871 | 4:35 PM | ðŸ”µ | API client interfaces and models | ~1519 |
| #1870 | 4:35 PM | ðŸ”µ | Project parameter usage | ~2949 |
| #1869 | 4:34 PM | ðŸ”µ | ProjectsView component structure | ~5194 |
| #1868 | 4:34 PM | ðŸ”µ | API Client Structure and Endpoints | ~3600 |
| #1867 | 4:34 PM | ðŸ”µ | API client project endpoints | ~877 |
| #1866 | 4:34 PM | ðŸ”µ | No project modification endpoints | ~723 |
| #1865 | 4:34 PM | ðŸ”µ | Project deletion/archive/rename | ~712 |
| #1864 | 4:33 PM | ðŸ”µ | Task list reveals project features | ~862 |
| #1863 | 4:33 PM | ðŸŸ  | Add project actions | ~797 |
| #1862 | 4:32 PM | ðŸ”µ | Exploring Projects.tsx | ~5202 |
| #1861 | 4:32 PM | ðŸ”µ | No project management API | ~720 |

## Key Insights

- **Critical Bug**: OBSERVATION_SYSTEM_PROMPT is missing 9 observation types, causing LLM misclassification (#1886). Requires immediate synchronization with database types.
- **Project Management**: Added comprehensive project actions (rename, archive, delete) with UI state management (#1879, #1877, #1873). API endpoints for project settings were implemented (#1876, #1874).
- **Type Safety**: TypeScript checks pass consistently across the monorepo (#1883, #1882, #1881, #1880), confirming codebase integrity.
- **UI Enhancements**: Discovered and documented UI components for session details, observation types, and file statistics (#1889, #1885, #1884). Project deletion behavior preserves observations (#1887).
- **Next Steps**: Address the OBSERVATION_SYSTEM_PROMPT bug, finalize project management features, and modularize large UI components (e.g., Settings.tsx).
</claude-mem-context>
